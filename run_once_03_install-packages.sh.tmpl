{{- if (eq .chezmoi.os "darwin") -}}
#!/usr/bin/env fish

find /Library/Apple/usr/lib/ -name "*Rosetta*"; or sudo softwareupdate --install-rosetta

# TODO: conditional brew packages for work/personal - see https://github.com/twpayne/dotfiles/blob/master/run_once_before_10-install-packages-darwin.sh.tmpl
echo "\
tap \"homebrew/bundle\"
tap \"homebrew/cask\"
tap \"homebrew/cask-fonts\"
tap \"homebrew/cask-versions\"
tap \"homebrew/core\"
tap \"homebrew/services\"
tap \"keith/formulae\"
brew \"glib\"
brew \"bat\"
brew \"bison\"
brew \"chezmoi\"
brew \"curl\"
brew \"docutils\"
brew \"dockutil\"
brew \"exa\"
brew \"fd\"
brew \"libogg\"
brew \"unbound\"
brew \"gnutls\"
brew \"gobject-introspection\"
brew \"harfbuzz\"
brew \"leptonica\"
brew \"libass\"
brew \"libbluray\"
brew \"nghttp2\"
brew \"tesseract\"
brew \"theora\"
brew \"ffmpeg\"
brew \"fftw\"
brew \"findutils\"
brew \"pango\"
brew \"fontforge\"
brew \"fzf\"
brew \"gd\"
brew \"gdk-pixbuf\"
brew \"gsettings-desktop-schemas\"
brew \"glib-networking\"
brew \"go\"
brew \"graphviz\"
brew \"gstreamer\"
brew \"libmms\"
brew \"gst-plugins-bad\"
brew \"libsoup\"
brew \"taglib\"
brew \"vala\"
brew \"gst-plugins-good\"
brew \"gst-plugins-ugly\"
brew \"pygobject3\"
brew \"gst-python\"
brew \"ical-buddy\"
brew \"imagemagick\"
brew \"imagemagick@6\"
brew \"libdvdcss\"
brew \"libproxy\"
brew \"libraqm\"
brew \"libxml2\"
brew \"luv\"
brew \"mad\"
brew \"markdown\"
brew \"mas\"
brew \"maven\"
brew \"media-info\"
brew \"neovim\"
brew \"node\"
brew \"pillow\"
brew \"podman\"
brew \"pybind11\"
brew \"ocrmypdf\"
brew \"pandoc\"
brew \"qt\"
brew \"poppler\"
brew \"py2cairo\"
brew \"pyenv\"
brew \"rename\"
brew \"ripgrep-all\"
brew \"ruby\"
brew \"rust\"
brew \"sphinx-doc\"
brew \"tmux\"
brew \"two-lame\"
brew \"vim\"
brew \"whalebrew\"
brew \"keith/formulae/reminders-cli\"
cask \"1password\"
cask \"1password-cli\"
cask \"alfred\"
cask \"arq\"
cask \"bartender\"
cask \"cardhop\"
cask \"corretto\"
cask \"fantastical\"
cask \"firefox\"
cask \"font-hack-nerd-font\"
cask \"font-jetbrains-mono-nerd-font\"
cask \"google-chrome\"
cask \"handbrake\"
cask \"hazel\"
cask \"istat-menus\"
cask \"iterm2\"
cask \"karabiner-elements\"
cask \"makemkv\"
cask \"microsoft-auto-update\"
cask \"microsoft-edge\"
cask \"microsoft-teams\"
cask \"moneydance\"
cask \"netnewswire\"
cask \"paw\"
cask \"receipts\"
cask \"resilio-sync\"
cask \"screens\"
cask \"screens-connect\"
cask \"sf-symbols\"
cask \"soundsource\"
cask \"swiftbar\"
cask \"transmit\"
cask \"visual-studio-code\"
cask \"vlc\"
cask \"xld\"
cask \"xquartz\"
mas \"1Blocker\", id: 1365531024
mas \"Banktivity\", id: 1480779512
mas \"FileBot\", id: 905384638
mas \"GarageBand\", id: 682658836
mas \"HomeControl\", id: 1547121417
mas \"iMovie\", id: 408981434
mas \"Keynote\", id: 409183694
mas \"Microsoft Excel\", id: 462058435
mas \"Microsoft OneNote\", id: 784801555
mas \"Microsoft Outlook\", id: 985367838
mas \"Microsoft PowerPoint\", id: 462062816
mas \"Microsoft Remote Desktop\", id: 1295203466
mas \"Microsoft Word\", id: 462054704
mas \"Numbers\", id: 409203825
mas \"OneDrive\", id: 823766827
mas \"Pages\", id: 409201541
mas \"PCalc\", id: 403504866
mas \"Save to Pocket\", id: 1477385213
mas \"Slack\", id: 803453959
mas \"StopTheMadness\", id: 1376402589
mas \"Vimari\", id: 1480933944
mas \"Xcode\", id: 497799835
" | brew bundle --no-lock --file=/dev/stdin
{{ end -}}
